> 参考 https://zhuanlan.zhihu.com/p/419224864
## Redis是什么
+ C语言编写的Key-Value内存数据库
+ (6.0以前)单线程，一个线程处理所有网络请求。减少线程切换开销，减少锁、竞争
> 6.0后是多线程。单线程仅仅指网络请求处理，其他功能的话有其他线程
+ 支持多种数据类型String、Hash、Set、List等
+ 持久化有RDB(定期快照)和AOF(存命令历史)
+ 支持事务
+ 单个操作是原子性的
+ 支持主从复制。可以读写分离，即，读写可以采用不同机器不同进程
+ 高并发：单个Redis实例支持10万QPS

## Redis为什么快
+ 基于内存，(相对硬盘)读写速度快
+ (6.0以前)单线程实现，避免线程切换开销，避免锁资源争用
+ IO多路复用，通过事件机制轮询描述符
+ 高效的数据结构设计

## 6.0以前为什么用单线程
+ 实现简单，容易维护
+ 避免线程切换开销，避免锁资源争用

## 为什么6.0后引入多线程
+ 利用CPU的多核优势
+ 分摊同步IO的读写时间。如，DEL一个大key
> 难道不是开发者有空改成多线程了，之前没空？

## Redis的用途
+ 作为缓存。缓存热数据
+ 作为消息队列，MQ
+ 作为计数器，因为天然就有原子性。因此也可以是秒杀场景的限速器
+ 提供集合功能，如好友列表

## 为什么不用Memcached
+ redis更易用，功能更多，速度又快的多

## 数据类型
+ **String: 可以是字符串、数字或者二进制**
+ Hash: 一个键值对集合
+ Set: 无序去重的集合。Set 提供了交集、并集
+ List: 有序可重复的集合，底层是依赖双向链表实现的
+ SortedSet:有序Set, 适用于排行榜和带权重的消息队列等场景
+ Bitmap: 位图
+ Hyperloglog: 基数统计的算法,可以统计独立访客数
+ Geospatial: 要用于存储地理位置信息
+ **Rejson: 提供json类型**

## 事务
+ 使用multi开启，exec提交
+ 一个事务范围内某个命令出错不会影响其他命令的执行，不保证原子性
+ 批量操作在发送 EXEC 命令前被放入队列缓存
+ 在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中
```
multi
set a 1
set b 1 2
set c 3
exec
```

## 持久化
+ RDB方式：定期或手动快照为dump.rdb磁盘文件。是fork父进程出子进程实现的，之后子进程将内存内容写硬盘，fork时会阻塞，因此要避免频繁做持久化
+ AOF:Append only file， 以独立日志的方式记录每次写命令
> RDB方式只能恢复到上次持久化的；AOF可以恢复所有数据，但是恢复慢，且存储文件大
